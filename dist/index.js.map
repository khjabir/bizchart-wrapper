{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["/* eslint-disable no-use-before-define */\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nimport * as React from 'react';\nimport {\n\tChart,\n\tTooltip,\n\tAxis,\n\tLegend,\n\tInterval,\n\tCoordinate,\n\tInteraction,\n} from 'bizcharts';\nimport DataSet from '@antv/data-set';\nimport * as  PropTypes from 'prop-types';\n\n// import {\n// \tDTEmpty, DTSkeleton,\n// } from '@components';\n\n/**\nDescription here\n*/\n\nconst DTBarChart = ({\n\ttype,\n\tdata,\n\tfieldsToFold,\n\tcolors,\n\tchartHeight,\n\tchartWidth,\n\tpadding,\n\terror,\n\t// noData,\n\t// loading,\n\tlegend,\n\tcustomTooltip,\n\ttooltipContainerTemplate,\n\ttooltipItemTemplate,\n\tonChartClicked,\n\tstyle,\n\tclassName,\n}) => {\n\tconst [localData, setLocalData] = React.useState([]);\n\n\tReact.useEffect(() => {\n\t\tsetLocalData(data);\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [data]);\n\n\tReact.useEffect(() => {\n\t\tif (error) setLocalData([]);\n\t}, [error]);\n\n\tconst onBarChartClicked = (e) => {\n\t\tif (e?.data?.data) {\n\t\t\tonChartClicked(e?.data?.data);\n\t\t}\n\t};\n\tconst ds = new DataSet();\n\tconst dv = ds.createView().source(localData);\n\tdv.transform({\n\t\ttype   : 'fold',\n\t\tfields : fieldsToFold,\n\t\tkey    : 'type',\n\t\tvalue  : 'value',\n\t});\n\n\t// if (loading) return <DTSkeleton loading={loading} />;\n\n\treturn (\n\t\t<>\n\t\t\t<Chart\n\t\t\t\theight={chartHeight}\n\t\t\t\twidth={chartWidth}\n\t\t\t\tdata={dv}\n\t\t\t\tautoFit\n\t\t\t\tpadding={padding}\n\t\t\t\tonPlotClick={onBarChartClicked}\n\t\t\t\tclassName={className}\n\t\t\t\tstyle={style}\n\t\t\t\t// placeholder={!localData.length && <DTEmpty description={error || noData || ''} />}\n\t\t\t\t// errorContent={() => <DTEmpty description=\"Error loading charts\" />}\n\t\t\t>\n\t\t\t\t<Interval\n\t\t\t\t\tposition=\"label*value\"\n\t\t\t\t\tcolor={colors ? ['type', (item) => colors[item]] : 'type'}\n\t\t\t\t\tadjust={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype        : 'dodge',\n\t\t\t\t\t\t\tmarginRatio : 1 / 32,\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t\t<Coordinate\n\t\t\t\t\ttranspose={type === 'horizontal'}\n\t\t\t\t\tscale={type === 'horizontal' ? [1, -1] : undefined}\n\t\t\t\t\t// actions={type !== 'horizontal' ? [[1, -1], ['transpose']] : undefined}\n\t\t\t\t/>\n\t\t\t\t<Interaction type=\"element-active\" />\n\t\t\t\t<Tooltip\n\t\t\t\t\tshowTitle={false}\n\t\t\t\t\tcontainerTpl={tooltipContainerTemplate}\n\t\t\t\t\titemTpl={tooltipItemTemplate}\n\t\t\t\t\tshared\n\t\t\t\t>\n\t\t\t\t\t{customTooltip}\n\t\t\t\t</Tooltip>\n\t\t\t\t<Axis name=\"label\" />\n\t\t\t\t<Axis\n\t\t\t\t\tname=\"value\"\n\t\t\t\t\tposition={type === 'horizontal' ? 'right' : undefined}\n\t\t\t\t/>\n\t\t\t\t<Legend visible={legend} />\n\t\t\t</Chart>\n\t\t</>\n\t);\n};\n\nDTBarChart.propTypes = {\n\ttype         : PropTypes.oneOf(['horizontal', 'vertical']),\n\t/**\n\t\tData Eg. [{label : '', value1 : '', value2 : '',data :{}}]\n\t*/\n\tdata         : PropTypes.arrayOf(PropTypes.object).isRequired,\n\t/**\n\t\tValue fields to be folded\n\t\tEg. [\"valueField1\", \"valueField2\"] or if only a single value field is present [\"valueField1\"]\n\t*/\n\tfieldsToFold : PropTypes.arrayOf(PropTypes.string).isRequired,\n\tcolors       : PropTypes.objectOf(PropTypes.string),\n\tloading      : PropTypes.bool,\n\terror        : PropTypes.string,\n\tnoData       : PropTypes.string,\n\tchartHeight  : PropTypes.number,\n\tchartWidth   : PropTypes.number,\n\tlegend       : PropTypes.bool,\n\tpadding      : PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.number,\n\t]),\n\t/**\n\t\tCustom tooltip function, should return tooltip to be displayed.\n\t\tEg. (title) => return <span>{title}</span>\n\t*/\n\tcustomTooltip            : PropTypes.func,\n\t/**\n\t\tTootip Container Template. Should be HTML contents in a string\n\t*/\n\ttooltipContainerTemplate : PropTypes.string,\n\t/**\n\t\tTootip Item Template. Should be HTML contents in a string\n\t*/\n\ttooltipItemTemplate      : PropTypes.string,\n\tonChartClicked           : PropTypes.func,\n\tstyle                    : PropTypes.object,\n\tclassName                : PropTypes.string,\n};\n\nDTBarChart.defaultProps = {\n\ttype                     : 'horizontal',\n\tcolors                   : undefined,\n\terror                    : undefined,\n\tnoData                   : undefined,\n\tloading                  : false,\n\tchartHeight              : 400,\n\tchartWidth               : 500,\n\tlegend                   : true,\n\tpadding                  : 'auto',\n\tcustomTooltip            : undefined,\n\ttooltipContainerTemplate : undefined,\n\ttooltipItemTemplate      : undefined,\n\tonChartClicked           : () => {},\n\tstyle                    : undefined,\n\tclassName                : undefined,\n};\n\nexport default DTBarChart;\n"],"names":["React.useState","React.useEffect","React.createElement","Chart","Interval","Coordinate","Interaction","Tooltip","Axis","Legend","PropTypes.oneOf","PropTypes.arrayOf","PropTypes.object","PropTypes.string","PropTypes.objectOf","PropTypes.bool","PropTypes.number","PropTypes.oneOfType","PropTypes.func"],"mappings":"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"}